<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MagnetTools user manual :: Cemosis Docs</title>
    <link rel="canonical" href="https://docs.cemosis.fr/hifimagnet/stable/magnettools/index.html">
    <meta name="keywords" content="Feel++, partial differential equations, finite element method,">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">    
<script>!function(l,p){if(l.protocol!==p&&l.host=="docs.antora.org"){l.protocol=p}else if(/\.gitlab\.io$/.test(l.host)){l.replace(p+"//docs.antora.org"+l.pathname.substr(l.pathname.indexOf("/",1))+l.search+l.hash)}}(location,"https:")</script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true, 
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },

  TeX: {
      Macros: {
      RR: "{\\mathbb R}",
      NN: "{\\mathbb N}",
      Nso: "{N_{\\mathrm{so}}}",
      Nma: "{N_{\\mathrm{ma}}}",
      Nno: "{N_{\\mathrm{no}}}",
      Ne: "{N_{\\mathrm{e}}}",
      Ilag: ["{\\mathcal{I}^{\\mathrm{lag}}_{#1}}",1],
      calTh: "{\\mathcal{T}_h}",
      Ck: ["{\\mathcal{C}^{#1}}",1],
      Pk: ["{\\mathcal{P}^{#1}}",1],
      Qk: ["{\\mathcal{Q}^{#1}}",1],
      Pch: ["{P^{#1}_{c,h}}",1],
      Pcho: ["{P^{#1}_{c,h,0}}",1],
      Qch: ["{Q^{#1}_{c,h}}",1],
      Ich: ["{\\mathcal{I}^{#1}_{c,h}#2}",2],
      poly: ["{\\mathbb{#1}}",1],
      nf: "{n_f}",
      ngeo: "{n_{\\mathrm{geo}}}",
      geo: "{\\mathrm{geo}}",
      card: ["{\\operatorname{card}(#1)}",1],
      dim: ["{\\operatorname{dim}(#1)}",1],
      opdim: "{\\operatorname{dim}}",
      card: ["{\\operatorname{card}(#1)}",1],
      poly: ["{\\mathbb{#1}",1],
      R: ["{\\mathbb{R}^{#1}}",1],
      set: ["{\\left\\{#1\\right\\}}",1],
      diam: "{\\operatorname{diam}}",
      jump: ["{[\\![ #1 ]\\!]}",1],
      Next: "{\\mathrm{n}}",
      essinf: "{\\operatorname{ess}\\, \\operatorname{inf}}",
      tr: "{\\operatorname{tr}}",
      Id: "{\\mathcal{I}}",
      disp: ["{\\mathbf{#1}}",1],
      stresst: ["{\\mathbf{\\sigma(#1)}}",1],
      deformt: ["{\\mathbf{\\varepsilon(#1)}}",1],
      domain: "{\\Omega}",
      prect: ["{\\left\\(#1\\right\\)}",1],
      ds: "",
      bold: ["{\\bf #1}",1],
      p: "{\\mathrm{p}}",
      q:"{\\mathbf{q}}",
      n:"{\\mathbf{n}}",
      T:"{\\mathcal{T}}",
      F:"{\\mathcal{F}}",
      P:"{\\mathcal{P}}",
      v:"{\\mathbf{v}}"
  },
  extensions: ["mhchem.js"] }
});
</script>
<!--<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML"></script>-->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML'>
</script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>-->

<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>-->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65761593-2"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-65761593-2')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar  navbar-expand-sm bg-dark navbar-dark">
    <div class="navbar-brand">
      <div class="navbar-item">
         <!--  <a href="https://book.feelpp.org">Feel++ documentation</a> -->
           <a href="https://docs.cemosis.fr">Cemosis Docs</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://docs.cemosis.fr">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Docs</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Latest Version</strong></div>

            <!-- this code allow to manage ordering of navbar item -->
               
              <a class="navbar-item" href="/cemosis/latest/index.html"> Cemosis Documentation </a>
                  
              <a class="navbar-item" href="/antora-ui-default/index.html"> Cemosis Documentation UI </a>
                  
              <a class="navbar-item" href="/eye2brain/current/index.html"> Eye2Brain Manual </a>
                  
              <a class="navbar-item" href="/feelpp-cfd/latest/index.html"> Feel++ CFD </a>
                  
              <a class="navbar-item" href="/mqs/latest/index.html"> Feel++ Maxwell Quasi Static </a>
                  
              <a class="navbar-item" href="/hemotumpp/0.1/index.html"> HemoTum++ </a>
                  
              <a class="navbar-item" href="/hifimagnet/stable/index.html"> HiFiMagnet Documentation </a>
                  
              <a class="navbar-item" href="/holo3/latest/index.html"> Holo3 </a>
                    
              <a class="navbar-item" href="/ibat/latest/index.html"> IBat Docs </a>
                  
              <a class="navbar-item" href="/msqab/latest/index.html"> msqab </a>
                  
              <a class="navbar-item" href="/swimmer/latest/index.html"> Swimmer Docs </a>
               

            <hr class="navbar-divider">
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Feel++</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>GitHub</strong></div>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp">GitHub Repository</a>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp/issues">GitHub Issue Tracker</a>
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Documentation</strong></div>
            <a class="navbar-item" href="http://docs.feelpp.org/user/">User Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/dev/">Developer Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/toolbox/">Toolbox Manual</a>
            
          </div>
        </div>
        <div class="primary-action">
            <form class="navbar-item search">
              <input type="text" placeholder="Search Cemosis Docs" class="query" id="search-query">
              <button type="button" class="search-btn"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand" href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ">
            <img src="../../../_/img/slack.png" alt="slack" style="width:30px;"></a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://docs.feelpp.org">
            <img src="../../../_/img/logoFeelpp.png" alt="Feel++" style="width:60px;">
          </a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://www.cemosis.fr">
            <img src="../../../_/img/logoCemosisTransparent.png" alt="Cemosis" style="width:60px;">
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="hifimagnet" data-version="stable">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">HiFiMagnet Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html#manuals">Manuals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html#help">Help</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html#contribute">Contribute</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html#copyright">Licenses</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html#authors">Authors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../model/index.html#model">Physical Modelling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../model/index.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../model/index.html#coupled3d">Coupled Model</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../model/index.html#thermoelec">ThermoElectric Model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../model/index.html#magneto">Magnetostatic Model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../model/index.html#meca">ELasticity Model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../model/index.html#cooling">ThermoHydraulics Model</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cad/index.html#salome_plugin">HifiMagnet Salome plugin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cad/index.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cad/index.html#quickstart">Quickstart</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cad/index.html#qs_getting">Getting Salome</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cad/index.html#qs_reference">Running Salome</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cad/index.html#data">Data Structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cad/index.html#usage">Usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#magnettools_manual">MagnetTools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#installation">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="DataStructure.html">Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Bmap.html">Magnetic Field Map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Transient.html">Transient Analysis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Optimization.html">Optimization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../user/index.html#user_manual">User Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/index.html#quickstart">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/index.html#usage">Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/index.html#usage_hifimagnet">Using HiFiMagnet</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../post/index.html#post_manual">Post-Processing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post/index.html#paraview">Paraview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../post/index.html#ensight">Ensight</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../benchmarks/index.html#main_examples">Examples and Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../benchmarks/index.html#examples">Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../benchmarks/index.html#examples">Benchmarks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../benchmarks/index.html#validations">Validations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../benchmarks/index.html#verifications">Verifications</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mso4sc/index.html#msoportal">MSOPortal</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mso4sc/index.html#msoportal">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mso4sc/index.html#connect">Create an account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mso4sc/index.html#overview">OverView of the Portal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mso4sc/index.html#mso_setup">Setting up your account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mso4sc/user.html#enduser">EndUser</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/user.html#purchase">Purchasing an app</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/user.html#data">Uploading to DataCatalogue</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/user.html#running">Running an app</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/user.html#RemoteDesktop">Viewing results</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/user.html#offering_setup">Available apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mso4sc/dev.html#devuser">DevUser</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/dev.html#registerapp">Validate an <strong>EndUser</strong></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/dev.html#registerapp">Register App</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mso4sc/dev.html#validorder">Validate an order</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../dev/index.html#dev_manual">Developper Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/index.html#install_salome">HiFimagnet Salome plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/index.html#install_magnettools">MagnetTools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/index.html#install_hifimagnet">Hifimagnet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/index.html#mso4sc-dev">MSO4SC Portal</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tutorials/index.html#tutorials">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/thermoelec.html">ThermoElectric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/magnetostatic.html">Magnetostatic (H1)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/elasticity.html">Elasticity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/salome.html">Using Salome</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/ensight.html">Using Ensight</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">HiFiMagnet Documentation</span>
    <span class="version">stable</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Cemosis Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../cemosis/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Cemosis Documentation UI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../antora-ui-default/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Eye2Brain Manual</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../eye2brain/current/index.html">current</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Feel++ CFD</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../feelpp-cfd/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Feel++ Maxwell Quasi Static</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../mqs/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">HemoTum++</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../hemotumpp/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">HiFiMagnet Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">stable</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Holo3</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../holo3/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../holo3/doc-pierre/index.html">doc-pierre</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">IBat Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ibat/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">msqab</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../msqab/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Swimmer Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../swimmer/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../cemosis/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">HiFiMagnet Documentation</a></li>
    <li><a href="#magnettools_manual">MagnetTools</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/feelpp/book.hifimagnet/edit/master/docs/docs/modules/magnettools/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">MagnetTools user manual</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to MagnetTools manual documentation!</p>
</div>
<div class="paragraph">
<p>MagnetTools is a in-house software for solenoidal magnets that provides tools to compute:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Analytically Magnetic Field,</p>
</li>
<li>
<p>Mutual and Self Inductances,</p>
</li>
<li>
<p>Axial and Radial Forces,</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and to analyze some Transient Analysis.</p>
</div>
<div class="paragraph">
<p>MagnetTools also contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Optimization procedure to define the PolyHelices insert geometry,</p>
</li>
<li>
<p>Creation of Files for CAD and CAM of Helices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In MagnetTools, magnets are defined as a set of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PolyHelices,</p>
</li>
<li>
<p>Bitter Magnets,</p>
</li>
<li>
<p>and eventually Supraconductor Magnets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All magnets are torus of rectangular cross sections.</p>
</div>
</div>
</div>
<h1 id="quickstart" class="sect0"><a class="anchor" href="#quickstart"></a>Quick Starts</h1>
<div class="sect1">
<h2 id="qs_installation"><a class="anchor" href="#qs_installation"></a>1. Getting MagnetTools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using MagnetTools inside container, either Docker or Singularity based,
is the recommended and fastest way. If your system support singularity containers we recommend to use them instead of Docker ones.</p>
</div>
<div class="sect2">
<h3 id="_from_sregistry"><a class="anchor" href="#_from_sregistry"></a>1.1. from sregistry</h3>
<div class="paragraph">
<p>MagnetTools are included in HiFiMagnet singularity image.
To get HiFiMagnet singularity image see this <a href="../user/index.html#singularity" class="page">section</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_from_dockerhub"><a class="anchor" href="#_from_dockerhub"></a>1.2. from dockerhub</h3>
<div class="paragraph">
<p>MagnetTools are included in HiFiMagnet docker image.
To get HiFiMagnet docker image see <a href="../user/index.html#dockerhub" class="page">section</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_from_lncmi_debian_repository"><a class="anchor" href="#_from_lncmi_debian_repository"></a>1.3. from Lncmi Debian repository</h3>
<div class="paragraph">
<p>On Debian/Ubuntu system you can install MagnetTools from the local Lncmi packages repository.
To do so:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>you need to have access to the Lncmi repository</p>
</li>
<li>
<p>add a <code>lncmi.lst</code> into your <code>/etc/apt/sources.list.d</code> directory:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><code>lncmi.lst</code> for Debian Testing distribution</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">deb http://euler/~trophime/debian/ testing main
deb-src http://euler/~trophime/debian/ testing main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csh hljs" data-lang="csh">sudo apt update
sudo apt install hifimagnet</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Supported Debian/Ubuntu distributions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stretch</p>
</li>
<li>
<p>Xenial</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On Windows 10 Pro you can also install HiFiMagnet without much effort.
Just enable WSL feature and download Debian Stretch or Ubuntu Xenial (aka 16.04 LST)
from Microsoft App Store. Then apply the same procedure as above to install the package.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage"><a class="anchor" href="#usage"></a>2. Using MagnetTools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="data"><a class="anchor" href="#data"></a>2.1. Data Structure</h3>
<div class="imageblock">
<div class="content">
<img src="_images/geom_axi.png" alt="A 14 helices insert with 2 external bitter magnets">
</div>
</div>
<div class="paragraph">
<p>The magnets description is given in <code>.d</code> file.
The <code>.d</code> file is structured as follows:</p>
</div>
<div class="sect3">
<h4 id="header_section"><a class="anchor" href="#header_section"></a>2.1.1. A header section:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">#Power[MW]	Current[A]	Safety Ratio[]	T_ref[°C]	SymetryFlag
12.5	        31000	        0.8	        20		Sym, <i class="conum" data-value="1"></i><b>(1)</b>
#Helices	N_Elem
14		56, <i class="conum" data-value="2"></i><b>(2)</b>
#N   R1[m]      R2[m]      HalfL[m]    Rho[Ohm.m] Alpha[1/K] E_Max[Pa] K[W/(m.K)]   h[W/(m^2.K)] &lt;T_W&gt;[°C] T_Max[°C], <i class="conum" data-value="3"></i><b>(3)</b>
4    1.930e-02	2.420e-02  7.7050e-02  1.992e-08  0.00e+00   3.600e+08 3.800000e+02 8.500000e+04 3.000e+01 1.00e+02
...
4    1.703e-01	1.860e-01  1.6415e-01  2.087e-08  0.00e+00   3.740e+08 3.800000e+02 8.500000e+04 3.000e+01 1.00e+02
0., <i class="conum" data-value="4"></i><b>(4)</b>
#External_Magnets, <i class="conum" data-value="5"></i><b>(5)</b>
0</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Main parameters
<div class="ulist">
<ul>
<li>
<p>Max. electrical power available</p>
</li>
<li>
<p>Nominal Current \(I_o\),</p>
</li>
<li>
<p>Safety ratio requested (ratio between the max. allowed stress and and the actual hoop stress).</p>
</li>
<li>
<p>A reference temperature \(T_{ref}\)</p>
</li>
<li>
<p>A flag to indicate wether or not we consider only half of the polyhelix insert</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Main polyhelices insert characteristics:
<div class="ulist">
<ul>
<li>
<p>\(Helices\), the number of Tubes,</p>
</li>
<li>
<p>the total number of elements for the polyhelices insert (aka \(N*Helices\)) (optional)</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Description of each helix:
<div class="ulist">
<ul>
<li>
<p>\(N\)</p>
</li>
<li>
<p>\(R_1\) inner radius</p>
</li>
<li>
<p>\(R_2\) outer radius</p>
</li>
<li>
<p>HalfL half electrical length</p>
</li>
<li>
<p>The physical properties are given at \(T_{ref}\):</p>
<div class="ulist">
<ul>
<li>
<p>\(\rho[Ohm.m]\), resistivity at \(T_{ref}\)</p>
</li>
<li>
<p>\(Alpha[1/K]\),</p>
</li>
<li>
<p>\(K[W/(m.K)]\), thermal conductivity at \(T_{ref}\)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cooling params:</p>
<div class="ulist">
<ul>
<li>
<p>\(h[W/(m^2.K)]\),</p>
</li>
<li>
<p>\(&lt;T_W&gt;[°C]\),</p>
</li>
</ul>
</div>
</li>
<li>
<p>Max allowed values:</p>
<div class="ulist">
<ul>
<li>
<p>\(E_{Max}[Pa]\),</p>
</li>
<li>
<p>\(T_{Max}[°C]\)</p>
</li>
</ul>
</div>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>flag to indicate the end of the polyhelices insert definition</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Definitions of external magnets, if any</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_external_magnets_section"><a class="anchor" href="#_external_magnets_section"></a>2.1.2. External Magnets section</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">#External_Magnets <i class="conum" data-value="1"></i><b>(1)</b>
6
#Type	R1[m]	R2[m] 	Z1[m]	  Z2[m]	    J(R1)[A/m2]	Rho[Ohm.m]	      Nturn <i class="conum" data-value="2"></i><b>(2)</b>
1	0.2	0.34	-0.29899  -0.14685  44512000	1.7241379310345e-08   23
1	0.2	0.34	-0.14685   0.14685  86222000	1.7241379310345e-08   86
1	0.2	0.34	 0.14685   0.29899  44512000	1.7241379310345e-08   23
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Number of external magnets, providing the background field</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Definition of external magnet:
<div class="ulist">
<ul>
<li>
<p>Type: 1 for Bitter, 0 for Supra</p>
</li>
<li>
<p>\(R_1, R_2, Z_1, Z_2\): dimensions of the rectangular cross section</p>
</li>
<li>
<p>J: current densitiy at \(r=R_1\)</p>
</li>
<li>
<p>\(\rho\)</p>
</li>
<li>
<p>\(N_{turn}\)</p>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_resume_section"><a class="anchor" href="#_resume_section"></a>2.1.3. Resume section:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">#Bz(0)[tesla]	Power[MW]	Bz_total(0)[tesla] <i class="conum" data-value="1"></i><b>(1)</b>
2.754479e+01	1.250000e+01	2.754479e+01

  #Helice	B0_H[tesla]	Sum_B0[tesla]	Power_H[MW]	Sum_Power[MW] <i class="conum" data-value="2"></i><b>(2)</b>
  1	       1.836561e+00	1.836561e+00	1.965246e-01	1.965246e-01
  ...
  14	       1.499948e+00	2.754479e+01	1.434240e+00	1.250000e+01</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Main characteristics:
<div class="ulist">
<ul>
<li>
<p>Magnetic Field provided by the polyhelices insert (aka self field),</p>
</li>
<li>
<p>Total electrical power</p>
</li>
<li>
<p>Total Magnetic Field (aka self field + background field)</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Contribution to the self magnetic field and power per helix</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_detailed_helix_section"><a class="anchor" href="#_detailed_helix_section"></a>2.1.4. Detailed Helix section</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">  #Helix	&lt;T&gt;[°C]		N_Turn		IACS[%] <i class="conum" data-value="1"></i><b>(1)</b>
  1	9.493052e+01	7.547479e+00	8.654981e+01
  #Elem	J[10^8 A/m2]	Tlim[°C]	Tmax[°C]	&lt;T&gt;[°C]		Elim[MPa]	Emax[MPa]	Pitch[m]	Nturns <i class="conum" data-value="2"></i><b>(2)</b>
  1	3.477121e+00	1.000000e+02	1.000000e+02	9.493052e+01	3.600000e+02	1.803207e+02	2.041741e-02	1.886870e+00
  2	3.477121e+00	1.000000e+02	1.000000e+02	9.493052e+01	3.600000e+02	1.854755e+02	2.041741e-02	1.886870e+00
  3	3.477121e+00	1.000000e+02	1.000000e+02	9.493052e+01	3.600000e+02	1.854755e+02	2.041741e-02	1.886870e+00
  4	3.477121e+00	1.000000e+02	1.000000e+02	9.493052e+01	3.600000e+02	1.803207e+02	2.041741e-02	1.886870e+00

  ....

  #Helix	&lt;T&gt;[°C]		N_Turn		IACS[%]
  14	6.639741e+01	1.766565e+01	8.258438e+01
  #Elem	J[10^8 A/m2]	Tlim[°C]	Tmax[°C]	&lt;T&gt;[°C]		Elim[MPa]	Emax[MPa]	Pitch[m]	Nturns
  1	8.490501e-01	1.000000e+02	5.387475e+01	5.014907e+01	3.740000e+02	-4.681979e-02	2.431188e-02	3.375921e+00
  2	1.372421e+00	1.000000e+02	9.238026e+01	8.264575e+01	3.740000e+02	-1.701580e+00	1.504057e-02	5.456906e+00
  3	1.372421e+00	1.000000e+02	9.238026e+01	8.264575e+01	3.740000e+02	-1.701580e+00	1.504057e-02	5.456906e+00
  4	8.490501e-01	1.000000e+02	5.387475e+01	5.014907e+01	3.740000e+02	-4.681983e-02	2.431188e-02	3.375921e+00

MARGE DE SECURITE CONTRAINTES= 2.000000e+01 %</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Stats per Helix: mean temperature, number of turns, IACS (ratio of ),</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Details per element:
<div class="ulist">
<ul>
<li>
<p>current densitiy at \(r=R_1\),</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fieldmaps"><a class="anchor" href="#fieldmaps"></a>2.2. Magnetic Field Maps</h3>
<div class="sect3">
<h4 id="bmap"><a class="anchor" href="#bmap"></a>2.2.1. Use <code>B_Map</code></h4>
<div class="paragraph">
<p><code>B_Map</code> enables axisymetrical calculation of the magnetic field and/or potential.</p>
</div>
<div class="paragraph">
<p>See this <a href="../benchmarks/MagnetTools_ex/Bmap/README.html" class="page">example</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The first time <code>B_Map</code> (or any other MagnetTools executable) is ran, a file <code>eps_params.dat</code> is created.
It contains default parameters for the numerical integrations that are performed.</p>
</div>
<div class="paragraph">
<p>Using the default values is generally safe.
So before entering the input currents for each part of the magnets, just press <code>enter</code> key
to use the default values.</p>
</div>
<div class="paragraph">
<p>The <code>eps_params.dat</code> file must be included in the datasets uploaded to MSO4SC Data Catalogue
for safe operation of MagnetTools</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Available options are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> --points=STRING           points on which b field is to be computed (x0,y0,z0,...)
 --points_file=STRING      file containing points on which b field is to be computed (x0,y0,z0,...)
 --innerbore=INNERBORE     mesh on which b field is to be computed
 --potential               enable magnetic potential calculation / exclude magnetic field
 -domain                   perform calculations on whole mesh
 -per_elem                 perform calculations on node (default is on node)
 --sphharm=INT             perform calculations for Spherical Harmonic Decomposition [n n]
 --even_nlon               set even number of longitude
 --interactive             activate interactive mode
 --verbose                 activate verbose mode
 --magnet=INT              switch to magnet type (0: Bitter, 1: Unif, 2: ThinSolenoid, 3: PassiveShims)
 --mm                      force switch to mm as default units
 --r=DOUBLE                specify radius [default is 1 m]
 --restart_from=INT        restating computation of b field from node ID
 --save                    save results in file (default is off)
 --display                 display Helices data (default is off)
 --gnuplot                 Generate Helices Geometry data for Gnuplot (default is off)
 --ensight                 Generate Helices Geometry data for ensight (default is off)
 --ascii                   ascii write mode for ensight
 --num_integ=INT           specify num_integ size (default 100)
 --num_eval=INT            specify num_eval size (default 100)
 --gsl-error-handler       deactivate gsl error handler (default is on)
 --omp_off                 turn off openm</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="levitation"><a class="anchor" href="#levitation"></a>2.2.2. Use <code>Levitation</code></h4>
<div class="paragraph">
<p><code>Levitation</code> computes Bz and its derivatives on Z-Axis using <a href="https://en.wikipedia.org/wiki/Automatic_differentiation">AD technics</a>.</p>
</div>
<div class="paragraph">
<p>Available options are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> --input=STRING                load input filename
 --order=INT                   specify order to consider (default is 6)
 --verbose                     activate verbose mode
 --no_ensight                  disable output for ensight
 --G0=DOUBLE                   specify G0 value to reach (default is 500)
 --residual_gravity=DOUBLE     specify residual gravity targetted in
                               percent (default is 1%)
 --check                       activate check mode (default is off)
 --find                        find levitation point (default is off)
 --save                        save results in file (default is off)
 --matlab                      save results in matlab/octave format
                               (default is off)
 --gsl-error-handler           deactivate gsl error handler (default is on)
 --interactive                 activate interactive mode
 --spec_vol=STRING             define spec vol (r, z) in m
 --sym                         activate sym mode
 --num_integ=INT               specify num_integ size (default 100)
 --num_eval=INT                specify num_eval size (default 100)
 --ascii                       ascii write mode for ensight
 --omp_off                     turn off openm</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="inductance"><a class="anchor" href="#inductance"></a>2.3. Self and Mutual Inductances</h3>
<div class="paragraph">
<p><code>Inductances</code> enables calculation of self and mutual inductances.</p>
</div>
<div class="paragraph">
<p>Available options are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> --output=STRING        set output filename
 --print-detail         activate detailled printing mode
 --num-int              activate numerical integration
 --log                  activate logging mode
 --verbose              activate verbose mode
 --currents=STRING      total currents
 --tolerance=STRING     z tolerances
 --ntol=STRING          ntol tolerances case
 --grid=STRING          ni nj grid size</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="forces"><a class="anchor" href="#forces"></a>2.4. Force Field Maps</h3>
<div class="sect3">
<h4 id="_axial_forces"><a class="anchor" href="#_axial_forces"></a>2.4.1. Axial Forces</h4>
<div class="paragraph">
<p><code>Inductances</code> also enables the computation of Axial Forces.</p>
</div>
</div>
<div class="sect3">
<h4 id="_radial_forces_and_torques"><a class="anchor" href="#_radial_forces_and_torques"></a>2.4.2. Radial Forces and Torques</h4>
<div class="paragraph">
<p><code>Forces</code> enables the calculations of forces and torques in case of radial misalignement of magnet axis. Available options are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> --output=STRING          set output filename
 --input=STRING           load input filename
 --save=STRING            save input data to filename
 --rotation=STRING        OxOz angle between z-axis (in deg)
 --translation=STRING     translations between Magnetic Center and Origin
 --grid=STRING            nr nz ntheta grid size
 --verbose                activate verbose mode</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_connection_with_csm_software_eg_samcef_ansys"><a class="anchor" href="#_connection_with_csm_software_eg_samcef_ansys"></a>2.4.3. Connection with CSM software (eg <code>Samcef</code>, <code>Ansys</code> )</h4>
<div class="paragraph">
<p><code>F_Map</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> -f, --input_format=INPUT_FORMAT     input mesh format (eg, .dat)
 --density=DOUBLE                specify density (default is nan)
 --verbose                       activate verbose mode
 --mm                            force switch to mm as default units
 --ascii                         ascii write mode for ensight
 --samcef                        Generate Samcef Forces data for Samcef
                                 (default is off)
 --ansys                         Generate Ansys Forces data for Ansys
                                 (default is off)
 --num_integ=INT                 specify num_integ size (default 100)
 --num_eval=INT                  specify num_eval size (default 100)
 --gsl-error-handler             deactivate gsl error handler (default is</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="transient"><a class="anchor" href="#transient"></a>2.5. Transient Analysis</h3>
<div class="ulist">
<ul>
<li>
<p>power failure</p>
<div class="ulist">
<ul>
<li>
<p>matrix exponential</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>powerfailure</code> enables simulations of transients (ie. power failure) using expokit</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implicit/explicit euler</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>transient_ida</code> enables simulations of transients (ie. power failure) using Sundials IDA lib. Available options are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code> --init=STRING            set init_current filename
 --output=STRING          set output filename
 --input=STRING           load input filename
 --save=STRING            save input data to filename
 --solver=INT             activate solver (0: dense, 1:gmres, 2:tfqmr)
 --params=STRING          load solver params from file
 --verbose                activate verbose mode
 --quench                 activate quench mode (add quench resistance to supra
 --aubert                 activate aubert init. current calculation mode
 --screen=INT             add screen definition
 --burnout=STRING         index of the bitter external magnet with a short-circuit (i j)
 --shorted_in_series      bitter external magnet(s) with a short-circuit are in series (0: false by default)
 --tolerance=DOUBLE       specify Optimaly tolerance (default is 1.0e-4)
 --grid_size=STRING       set grid size of B calculation (r0 r1 z0 z1)
 --grid_dim=STRING        set grid dim of B calculation (n_r n_z)
 --ascii                  ascii write mode for ensight
 --induct_file=STRING     save/load inductances from file
 --fz_file=STRING         save/load forces from file
 --num_integ=INT          specify num_integ size (default 100)
 --num_eval=INT           specify num_eval size (default 100)
 --no_ensight             disable output for ensight
 --omp_off                turn off openm</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>critical scenario: bitter burnout</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="optim"><a class="anchor" href="#optim"></a>2.6. Optimization</h3>
<div class="paragraph">
<p>The goal of the Axisymetric optimization is to provide an maximum magnetic field at the center of the insert
under constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>total electric power</p>
</li>
<li>
<p>maximal allowed temperature per helix</p>
</li>
<li>
<p>maximal allowed stress per helix</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>for a given insert geometry.</p>
</div>
<div class="paragraph">
<p>The unknowns may either be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the current density distribution per helix: <code>OptHelix</code>,</p>
</li>
<li>
<p>the maximum temperature distribution per helix: <code>OptAubert</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">OptAubert HL-31.dat</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Each helix is splitted in a given number of sections \(S_i\) along \(z\) axis.
The result of the optimization is the vector stem[{j_i}] (aka the current density \(j_i\) value on the inner radius of
all sections \(S_i\)) for <code>optaubert</code>.</p>
</div>
<div class="paragraph">
<p>The stress in each section is approximated by the <strong>Hoop stress</strong>, namely \(r j_{\theta}(r) \cdot b_z(r)\) for \(r=r_i\)
with \(r_i\) the inner radius of section \(S_i\).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Both codes relies on SQP programming with <code>Nag</code>.
For licensing issue, they can only be ran on <code>calcul10</code> server.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The input file corresponds to the <a href="DataStructure.html#header_section" class="page"><strong>header section</strong></a> of the <code>.d</code> magnet description file.
The output is a <code>.d</code> file.</p>
</div>
<div class="paragraph">
<p>To build the actual 3D geometry, that shall reflect, this axisymetrical current density distribution, we use
the following assumption:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the nominal current is \(I_o\),</p>
</li>
<li>
<p>each element \(S_i\) will be represented by an helix with a pitch \(p\) and a number of turn \(n\) such that
the helix carries the same current as the element:</p>
</li>
</ul>
</div>
<div class="stemblock">
<div class="content">
\[n * I_o = \int_{S_i} \mathbf{j} \cdot \mathbf{n} \,d\Gamma\]
</div>
</div>
<div class="paragraph">
<p>The optimization result are then used to define the helical cut thet would be machined
in each copper alloy tubes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CAD data may be obtained for Catia and/or Salome using:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">opt2cad HL-31.d , <i class="conum" data-value="1"></i><b>(1)</b>
addshape ... , <i class="conum" data-value="2"></i><b>(2)</b>
opt2yml HL-31.d , <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>opt2cad</code>  generates files for CAD/CAM Helices</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>addshape</code> generates files for CAD/CAM Helices with "bumps" on the helical cut shape path; this is optional.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>opt2yml</code> generates configuration files for building Helices with HiFiMagnet Salome plugin.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To create the actual 3D CAD model of an helix (abusively: tube in which an helical cut has been machined by EDM technic),
we still need some more information&#8230;&#8203;
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_use_optaubert"><a class="anchor" href="#_use_optaubert"></a>2.6.1. Use <code>OptAubert</code></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">optaubert HL-31.dat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Available options to control the optimization are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>--majorprint=INT                specify nag major print level (default is 10)
--minorprint=INT                specify nag major print level (default is 0)
--major_iteration_limit=INT     specify nag major iterations_limit (default is controlled by nag)
--minor_iteration_limit=INT     specify nag minor iterations_limit (default is controlled by nag)
--tolerance=DOUBLE              specify Optimaly tolerance (default is 1.0e-15)
--function_precision=DOUBLE     specify Function precision (default is 4.38e-15)
--feasibility=DOUBLE            specify nonlinear feasibility tolerance (default is 1.0e-15)
--check                         activate nag checks
--random                        initiliaze with random numbers
--init=STRING                   initialize solution from
--verbose                       activate verbose mode
--log                           activate nag logging mode
--recursive                     activate recursive mode</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other options are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>--gmsh                          activate gmsh output
--num_integ=INT                 specify num_integ size (default 100)
--num_eval=INT                  specify num_eval size (default 100)
--gsl-error-handler             deactivate gsl error handler (default is on)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_use_opthelix"><a class="anchor" href="#_use_opthelix"></a>2.6.2. Use <code>OptHelix</code></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">opthelix --stress --temp [--cooling] [--geom] HL-31.dat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Available options are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>--majorprint=INT                specify nag major print level (default is 10)
--minorprint=INT                specify nag major print level (default is 0)
--major_iteration_limit=INT     specify nag major iterations_limit (default is controlled by nag)
--minor_iteration_limit=INT     specify nag minor iterations_limit (default is controlled by nag)
--tolerance=DOUBLE              specify Optimaly tolerance (default is 1.0e-15)
--feasibility=DOUBLE            specify nonlinear feasibility tolerance (default is 1.0e-15)
--geom                          activate geometry optimization
--check                         activate nag checks
--temp                          activate temperature constraints
--stress                        activate stress constraints
--random                        initiliaze with random numbers
--gmsh                          activate gmsh output
--init=STRING                   initialize solution from
--verbose                       activate verbose mode
--log                           activate nag logging mode
--recursive                     activate recursive mode
--cooling                       activate cooling modeling
--num_integ=INT                 specify num_integ size (default 100)
--num_eval=INT                  specify num_eval size (default 100)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generating_cadcam_files"><a class="anchor" href="#_generating_cadcam_files"></a>2.6.3. Generating CAD/CAM files</h4>
<div class="paragraph">
<p>To create files for CAD or CAM use <code>opt2cad</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">opt2cad [-o format] HL-31.d</code></pre>
</div>
</div>
<div class="paragraph">
<p>Valid formats are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LNCMI</code>: default value, for creating file for Lncmi CAM</p>
</li>
<li>
<p><code>CATIA</code>: for creating files for CATIA</p>
</li>
<li>
<p><code>SALOME</code>: for creating files for Salome</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add shapes on some helical cuts, you may use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">add_shape --angle="60 90 120 120" --shape_angular_length=8 --shape=HL-31-995  --format=LNCMI --position="ALTERNATE" HL-31_H4</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we had shape profile <code>HL-31-995</code> at various angles on <code>HL-31_H4</code> helical cut.</p>
</div>
<div class="listingblock">
<div class="title">Definition of profile <code>HL-31-995</code>: <code>Shape_HL-31-995.dat</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">#Shape : HL-31-995 pour H4
#N_i
20
#X_i F_i
-3.24	0
-3.05	0.04
-2.88	0.15
-2.78	0.31
-2.74	0.5
-2.74	1.3
-2.7	1.49
-2.59	1.65
-2.43	1.76
-2.24	1.8
 2.24	1.8
 2.43	1.76
 2.59	1.65
 2.7	1.49
 2.74	1.3
 2.74	0.5
 2.78	0.31
 2.88	0.15
 3.05	0.04
 3.24	0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will generate 2 files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HL-31_H4_cut_with_shapes.iso</code>: CAM file for the EDM machining,</p>
</li>
<li>
<p><code>HL-31_H4_cut_with_shapes.xls</code>: CAD file for CATIA (the file needs to be converted to a real Excell file with the script <code>write_excel.py</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_prepare_data_for_hifimagnet_salome"><a class="anchor" href="#_prepare_data_for_hifimagnet_salome"></a>2.6.4. Prepare Data for HiFiMagnet Salome</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">opt2yml HL-31.d</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command generates <code>.yaml</code> cfg files for Helices.
These files are, somehow, incomplete.
Some information has to be added to be complete, eg the dimension of the tube correspond to the actual helix.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To add shapes on some helical cuts, you may use <code>add_shape</code> as above with additional option <code>--format=SALOME</code>.
This will create the <code>HL-31_H4_cut_with_shapes_salome.dat</code> file for HiFiMagnet Salome plugin.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_references"><a class="anchor" href="#_references"></a>2.6.5. References</h4>

</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>

  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.cemosis.fr" class="icon">
            <img src="../../../_/img/logoCemosisTransparent.png" alt="Cemosis">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.cemosis.fr" target="_blank" rel="noopener">Projects Documentation</a></li>
          <li><a href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ" target="_blank" rel="noopener">Forums(Slack)</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.cemosis.fr" target="_blank" rel="noopener">Cemosis</a></li>
          <li><a href="https://www.cemosis.fr/news" target="_blank" rel="noopener">News</a></li>
          <li><a href="https://www.cemosis.fr/projects" target="_blank" rel="noopener">Projects</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.feelpp.org" target="_blank" rel="noopener">Feel++ Documentation</a></li>
          <li><a href="http://docs.feelpp.org/user/">Get Started</a></li>
          <li><a href="http://docs.feelpp.org/user//install/distributions/">Downloads</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/cemosis.fr" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/cemosis" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/cemosis" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Cemosis, Université de Strasbourg</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.cemosis.fr/terms-of-use">Terms of Use</a>
        <a href="https://www.cemosis.fr/privacy-policy">Privacy Policy</a>
        <a href="https://www.cemosis.fr/cookie-policy">Cookie Policy</a>
        <a href="https://www.cemosis.fr/support-policy">Support Policy</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>

<script async id="search-script" src="../../../_/js/vendor/docsearch.js" data-app-id="FIPLENFG5M" data-api-key="489d96aa4ae574ec7ad1f23741a2d46d" data-index-name="cemosis" data-stylesheet="../../../_/css/vendor/docsearch.css">
</script>

  </body>
</html>
