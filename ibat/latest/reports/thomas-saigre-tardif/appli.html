<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Application feelpp_hm_heat_moisture devlopment :: Cemosis Docs</title>
    <link rel="canonical" href="https://docs.cemosis.fr/ibat/latest/reports/thomas-saigre-tardif/appli.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">    
<script>!function(l,p){if(l.protocol!==p&&l.host=="docs.antora.org"){l.protocol=p}else if(/\.gitlab\.io$/.test(l.host)){l.replace(p+"//docs.antora.org"+l.pathname.substr(l.pathname.indexOf("/",1))+l.search+l.hash)}}(location,"https:")</script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true, 
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },

  TeX: {
      Macros: {
      RR: "{\\mathbb R}",
      NN: "{\\mathbb N}",
      Nso: "{N_{\\mathrm{so}}}",
      Nma: "{N_{\\mathrm{ma}}}",
      Nno: "{N_{\\mathrm{no}}}",
      Ne: "{N_{\\mathrm{e}}}",
      Ilag: ["{\\mathcal{I}^{\\mathrm{lag}}_{#1}}",1],
      calTh: "{\\mathcal{T}_h}",
      Ck: ["{\\mathcal{C}^{#1}}",1],
      Pk: ["{\\mathcal{P}^{#1}}",1],
      Qk: ["{\\mathcal{Q}^{#1}}",1],
      Pch: ["{P^{#1}_{c,h}}",1],
      Pcho: ["{P^{#1}_{c,h,0}}",1],
      Qch: ["{Q^{#1}_{c,h}}",1],
      Ich: ["{\\mathcal{I}^{#1}_{c,h}#2}",2],
      poly: ["{\\mathbb{#1}}",1],
      nf: "{n_f}",
      ngeo: "{n_{\\mathrm{geo}}}",
      geo: "{\\mathrm{geo}}",
      card: ["{\\operatorname{card}(#1)}",1],
      dim: ["{\\operatorname{dim}(#1)}",1],
      opdim: "{\\operatorname{dim}}",
      card: ["{\\operatorname{card}(#1)}",1],
      poly: ["{\\mathbb{#1}",1],
      R: ["{\\mathbb{R}^{#1}}",1],
      set: ["{\\left\\{#1\\right\\}}",1],
      diam: "{\\operatorname{diam}}",
      jump: ["{[\\![ #1 ]\\!]}",1],
      Next: "{\\mathrm{n}}",
      essinf: "{\\operatorname{ess}\\, \\operatorname{inf}}",
      tr: "{\\operatorname{tr}}",
      Id: "{\\mathcal{I}}",
      disp: ["{\\mathbf{#1}}",1],
      stresst: ["{\\mathbf{\\sigma(#1)}}",1],
      deformt: ["{\\mathbf{\\varepsilon(#1)}}",1],
      domain: "{\\Omega}",
      prect: ["{\\left\\(#1\\right\\)}",1],
      ds: "",
      bold: ["{\\bf #1}",1],
      p: "{\\mathrm{p}}",
      q:"{\\mathbf{q}}",
      n:"{\\mathbf{n}}",
      T:"{\\mathcal{T}}",
      F:"{\\mathcal{F}}",
      P:"{\\mathcal{P}}",
      v:"{\\mathbf{v}}"
  },
  extensions: ["mhchem.js"] }
});
</script>
<!--<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML"></script>-->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML'>
</script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>-->

<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>-->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65761593-2"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-65761593-2')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar  navbar-expand-sm bg-dark navbar-dark">
    <div class="navbar-brand">
      <div class="navbar-item">
         <!--  <a href="https://book.feelpp.org">Feel++ documentation</a> -->
           <a href="https://docs.cemosis.fr">Cemosis Docs</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://docs.cemosis.fr">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Docs</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Latest Version</strong></div>

            <!-- this code allow to manage ordering of navbar item -->
               
              <a class="navbar-item" href="/cemosis/latest/index.html"> Cemosis Documentation </a>
                  
              <a class="navbar-item" href="/antora-ui-default/index.html"> Cemosis Documentation UI </a>
                  
              <a class="navbar-item" href="/eye2brain/current/index.html"> Eye2Brain Manual </a>
                  
              <a class="navbar-item" href="/feelpp-cfd/latest/index.html"> Feel++ CFD </a>
                  
              <a class="navbar-item" href="/mqs/0.1.1/index.html"> Feel++ Maxwell Quasi Static </a>
                  
              <a class="navbar-item" href="/hemotumpp/0.1/index.html"> HemoTum++ </a>
                  
              <a class="navbar-item" href="/ibat/latest/index.html"> IBat </a>
                  
              <a class="navbar-item" href="/msqab/0.1/index.html"> msqab </a>
                  
              <a class="navbar-item" href="/swimmer/0.1/index.html"> Swimmer </a>
               

            <hr class="navbar-divider">
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Feel++</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>GitHub</strong></div>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp">GitHub Repository</a>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp/issues">GitHub Issue Tracker</a>
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Documentation</strong></div>
            <a class="navbar-item" href="http://docs.feelpp.org/user/">User Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/dev/">Developer Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/toolbox/">Toolbox Manual</a>
            
          </div>
        </div>
        <div class="primary-action">
            <form class="navbar-item search">
              <input type="text" placeholder="Search Cemosis Docs" class="query" id="search-query">
              <button type="button" class="search-btn"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand" href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ">
            <img src="/_/img/slack.png" alt="slack" style="width:30px;"></a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://docs.feelpp.org">
            <img src="/_/img/logoFeelpp.png" alt="Feel++" style="width:60px;">
          </a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://www.cemosis.fr">
            <img src="/_/img/logoCemosisTransparent.png" alt="Cemosis" style="width:60px;">
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ibat" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">IBat</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../data/README.html">Data</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../data/architecture/index.html">Data Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../data/architecture/index.html">Elastic Search</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data/processing/index.html">Data Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Geometry and Mesh</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../geometry/bim/index.html">BIM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../geometry/multizone/index.html">Multizone</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../geometry/3D/index.html">3D</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/index.html">Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/systemic/index.html">Systemic Model</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/systemic/cases/index.html">Systemic Expperiments</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/heat/index.html">Heat Transfer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/index.html">Radiative Heat Transfer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/viewfactor.html">View Factor</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/montecarlo.html">Monte Carlo</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/distribution.html">Distribution of random rays</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/moisture/index.html">Moisture Transfer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/moisture/model.html">Moisture processes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Benchmarks in Moisture Modeling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/moisture/benchmark-moisture.html">Benchmark: Drying out of a layer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/heat-moisture/index.html">Heat and Moisture Modeling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-moisture/model.html">Moisture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-moisture/cen2007.html">Heat and Moisture transfert Modeling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-moisture/notations-units.html">Notations and Units</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Benchmarks in Heat and Moisture Modeling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat-moisture/benchmark_EN15026_2007.html">Benckmark: Moisture uptake within a semi-infinite region EN 15026:2007</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat-moisture/benchmark-bestest.html">Benckmark: Bestest</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Heat Air Moisture Modeling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-air-moisture/index.html">Model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-air-moisture/application.html">Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/applications/doc_fpp_hm.html">Documentaion</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Notes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../models/heat-moisture/symmbc.html">Symmetry BC for CFD</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Methodologies</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methods/pbdw/README.html">PBDW</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methods/geim/geim.html">GEIM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methods/machine_learning/ml.html">ML</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methods/machine_learning/tools.html">Tools</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../applications/index.html">Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../applications/comfort/index.html">Thermal Comfort</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../applications/energy/index.html">Energy Simulation</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Reports</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Thomas&#8217;s Report</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="res_proj.html">Final results of the project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="drying-layer.html">Drying out of a layer</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="appli.html">Application development</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bestest.html">Benchmark Bestest</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="thermal_comfort.html">Thermal comfort</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hdg.html">HDG</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="conclusion.html">Conclusion and outlook</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../romain-vallet/index.html">Romain&#8217;s Report</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/index.html">Radiative Heat Transfer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/viewfactor.html">View Factor</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../models/heat/radiative-heat-transfer/montecarlo.html">Montecarlo</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../romain-vallet/geometry.html">Geometry tools</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../romain-vallet/moose.html">Details of MOOSE</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../romain-vallet/visonaray.html">Detail of Visonaray</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../romain-vallet/benchmarks.html">Benchmarks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../madani-ouachour/index.html">Sarra and Hanane&#8217;s Report</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/results.html">Project results,testing and randomization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/data.html">Data processing and missing data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/univariate.html">Univariate time series forecasting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/multivariate.html">Multivariate time series forecasting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/comfort.html">Comfort and discomfort criteria</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../madani-ouachour/conclusion.html">Conclusion</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IBat</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Cemosis Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../cemosis/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Cemosis Documentation UI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../antora-ui-default/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Eye2Brain Manual</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../eye2brain/current/index.html">current</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Feel++ CFD</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../feelpp-cfd/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Feel++ Maxwell Quasi Static</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../mqs/0.1.1/index.html">0.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">HemoTum++</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../hemotumpp/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">IBat</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">msqab</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../msqab/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Swimmer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../swimmer/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../cemosis/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">IBat</a></li>
    <li><a href="../index.html">Reports</a></li>
    <li><a href="index.html">Thomas&#8217;s Report</a></li>
    <li><a href="appli.html">Application development</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Application <code>feelpp_hm_heat_moisture</code> devlopment</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As is it coded yet, the application <code>feelpp_hm_heat_moisture</code> can only be used for one of the previous benchmarks at a time (<a href="../../models/moisture/benchmark-moisture.html" class="page">drying-layer</a>, and <a href="../../models/heat-moisture/benchmark_EN15026_2007.html" class="page">moisture-uptake</a>) : the values of the parameters are distinguished with macros, and we have to build again if we want to chang e, which is not a good strategy !</p>
</div>
<div class="paragraph">
<p>The idea is now to adapt it to make it work for all types of problems we want to model, using a JSON file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_complete_variationnal_problem"><a class="anchor" href="#_complete_variationnal_problem"></a>1. Complete variationnal problem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We considere the problem of heat-moisture transport (<em>cf <a href="../../models/heat-moisture/cen2007.html#_heat_and_moisture_transfert_coupling" class="page">here</a></em>) :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\left(\rho C_{p}\right)_{\mathrm{eff}} \frac{\partial T}{\partial t}+\nabla \cdot\left(-k_{\mathrm{eff}} \nabla T-L_{\mathrm{v}} \delta_{\mathrm{p}} \nabla\left(\phi p_{\mathrm{sat}}\right)\right)=Q \tag{$E_t$}\label{eq:T} \\
\quad \xi \frac{\partial \phi}{\partial t}+\nabla \cdot\left(-\xi D_{\mathrm{w}} \nabla \phi-\delta_{\mathrm{p}} \nabla\left(\phi p_{\mathrm{sat}}\right)\right)=G \tag{$E_\phi$}\label{eq:phi}
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>This system of equations is satisfied on the domain \(\Omega\). We add those boundary counditions :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
T &amp;= d_T &amp; \text{on}\,\Gamma_{T,D}\\
\phi &amp;= d_\phi &amp;\text{on}\,\Gamma_{\phi,D}\\
\nabla T\cdot n &amp;= N_T  &amp;\text{on}\,\Gamma_{T,N}\\
\nabla\phi\cdot n &amp;= N_\phi  &amp;\text{on}\,\Gamma_{\phi,N}\\
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>We have \(\partial\Omega=\Gamma_{T,D}\cup\Gamma_{T,N}\), and \(\partial\Omega=\Gamma_{\phi,D}\cup\Gamma_{\phi,N}\).</p>
</div>
<div class="paragraph">
<p>We make the usual time derivate approximation : \(\dfrac{\partial T}{\partial t}\approx\dfrac{T^{n+1}-T^n}{\Delta t}\)</p>
</div>
<div class="paragraph">
<p>Let \(v\) be a test function associated to \(T\). The first equation \(\ref{eq:T}\) become, after making a partial integration :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\int_\Omega (\rho C_p)_\mathrm{eff}^n\dfrac{T^{n+1}}{\Delta t}v &amp;+ \int_\Omega(k_\mathrm{eff}^n\nabla T^{n+1})\nabla v + \int_{\Gamma_{T,N}}\left(-k_\mathrm{eff}^n\nabla T^{n+1}\cdot\mathbf{n}\right)v + \int_{\Gamma_{T,D}}\left(-k_\mathrm{eff}^n\nabla T^{n+1}\cdot\mathbf{n}\right)v\\
&amp;+ \int_\Omega L_v^n\delta_\mathrm{p}^np_\mathrm{sat}^n\nabla\phi^{n+1}\nabla v + \int_{\Gamma_{\phi,N}}\left(-L_v^n\delta_\mathrm{p}^np_\mathrm{sat}^n\nabla\phi^{n+1}\cdot\mathbf{n}\right)v + \int_{\Gamma_{\phi,D}}\left(-L_v^n\delta_\mathrm{p}^np_\mathrm{sat}^n\nabla\phi^{n+1}\cdot\mathbf{n}\right)v \\
&amp;+ \int_\Omega L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n \phi^{n+1}\nabla v + \int_{\Gamma_{\phi,N}}\left(-L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n\phi^{n+1}\cdot\mathbf{n}\right)v + \int_{\Gamma_{\phi,D}}\left(-L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n\phi^{n+1}\cdot\mathbf{n}\right)v\\
&amp;=\int_\Omega \left((\rho C_p)_\mathrm{eff}^n\dfrac{T^n}{\Delta t} + Q^{n+1}\right)v
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>As \(v=0\) on \(\Gamma_{T,D}\) and on \(\Gamma_{\phi,D}\), and also there are the two Neimann conditions, this equation become :</p>
</div>
<div class="stemblock">
<div class="content">
\[a(T^{n+1},v)+b(\phi^{n+1},v)=f(v)\]
</div>
</div>
<div class="paragraph">
<p>with :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(a(T^{n+1},v) = \displaystyle\int_\Omega (\rho C_p)_\mathrm{eff}^n\dfrac{T^{n+1}}{\Delta t}v + \int_\Omega(k_\mathrm{eff}^n\nabla T^{n+1})\nabla v\)</p>
</li>
<li>
<p>\(b(\phi^{n+1},v) = \displaystyle\int_\Omega L_v^n\delta_\mathrm{p}^np_\mathrm{sat}^n\nabla\phi^{n+1}\nabla v + \int_\Omega L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n \phi^{n+1}\nabla v - \int_{\Gamma_{\phi,N}}\left(L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n\phi^{n+1}\cdot\mathbf{n}\right)v\)</p>
</li>
<li>
<p>\(f(v) = \displaystyle\int_\Omega \left((\rho C_p)_\mathrm{eff}^n\dfrac{T^n}{\Delta t} + Q^{n+1}\right)v + \int_{\Gamma_{T,N}} k_\mathrm{eff}^n N_T^{n+1} v + \int_{\Gamma_{\phi,N}} L_v^n\delta_\mathrm{p}^n\nabla p_\mathrm{sat}^n N_\phi^{n+1} v\)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Doing the same process with a test function \(q\) associated to \(\phi\), the equation \(\ref{eq:phi}\) become :</p>
</div>
<div class="stemblock">
<div class="content">
\[d(\phi^{n+1},q)=g(q)\]
</div>
</div>
<div class="paragraph">
<p>with :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(d(\phi^{n+1},q) = \displaystyle\int_\Omega\xi^n\frac{\phi^{n+1}}{\Delta t}q + \int_\Omega\xi^nD_\mathrm{w}^n\nabla\phi^{n+1}\nabla q + \int_\Omega\delta_\mathrm{p}^n\nabla\phi^{n+1}p_\mathrm{sat}^n\nabla q + \int_\Omega\delta_\mathrm{p}^n\phi^{n+1}\nabla p_\mathrm{sat}^{n}\nabla q - \int_{\Gamma_{N,\phi}}\left(\delta_\mathrm{p}^n\phi^{n+1}\nabla p_\mathrm{sat}^n\cdot\mathbf{n}\right)q\)</p>
</li>
<li>
<p>\(g(q) = \displaystyle\int_\Omega\left(\xi^n\dfrac{\phi^n}{\Delta t} + G^{n+1}\right)q + \int_{\Gamma_{N,\phi}}\left(\xi^nD_\mathrm{w}^n+\delta_\mathrm{p}^np_\mathrm{sat}^n\right)N_\phi^{n+1}q\)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_properties"><a class="anchor" href="#_model_properties"></a>2. Model properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As explained in the Feel <a href="http://docs.feelpp.org/tutorial-dev/latest/">Tutorial Dev</a>, the same set of equation allow solving a lot of different problems. That is why we define a model in Feel.</p>
</div>
<div class="paragraph">
<p>Models are represented by a class <code>ModelProperties</code> which contains sub-classes corresponding to the different sections of a JSON file. For example, I will show how to do it with boundary conditions, but the process is quite similar.</p>
</div>
<div class="paragraph">
<p>This object is stored as a member of the class <code>HeatMoisture</code>, named <code>props_</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_of_usage_for_boundary_conditions"><a class="anchor" href="#_example_of_usage_for_boundary_conditions"></a>3. Example of usage for boundary conditions</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"BoundaryConditions":
{
    "field":                    <i class="conum" data-value="1"></i><b>(1)</b>
    {
        "BC_type":              <i class="conum" data-value="2"></i><b>(2)</b>
        {
            "marker":           <i class="conum" data-value="3"></i><b>(3)</b>
            {
                "expr":"value"  <i class="conum" data-value="4"></i><b>(4)</b>
            }
        }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>field</code> is the field on what the boundary condition is applied (<code>phi</code> for relative humidity or <code>T</code> for heat)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>BC_type</code> is the type of boundary condition applied to the field (<code>Dirichlet</code> or <code>Neumann</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>marker</code> is the name of the physical entity in the geo file, on which the condition is applied</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>value</code> is the expression of the value of the condition applied to the field. For Dirichlet condition, it is equal to the value above it, and for Neumann condition, it is the value of \(f\) such as \(\frac{\partial \phi}{\partial n}=f\).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The boundary conditions are used in the code at the definition of the forms, in the functions <code>update</code> of the two classes (see section 5.3 of the <a href="../_attachments/report-project-csmi-m1-thomas.pdf">project report</a>)</p>
</div>
<div class="paragraph">
<p>We distinguich three type of physics used in the model :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>heat</code>, meaning that we solve only the heat problem</p>
</li>
<li>
<p><code>moisture</code>, meaning that we solve only the moisture problem</p>
</li>
<li>
<p><code>heat-moisture</code>, combining the two problems</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We define the physics in the JSON file in a section <code>Materials</code>, on associated markers, allowing to combine physics in a more complex geometry :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Materials":
{
    "Omega":
    {
        "physics":["moisture"],
        "markers":["Omega"],
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s focus on the implementation in C++ of the boundary conditions. Here is the (compacted) code of the <code>update</code> function in the class <code>Heat</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">void update( double t, PhiT const&amp; phi, double dt )
{
    this-&gt;a_.zero() ;
    this-&gt;l_.zero() ;

    for ( auto const&amp; [name, mat] : this-&gt;props_.materials() ) <i class="conum" data-value="1"></i><b>(1)</b>
    {
        if ( mat.hasPhysics( "heat" ) || mat.hasPhysics( "heat-moisture" ) ) <i class="conum" data-value="2"></i><b>(2)</b>
        {
            // don't depend on boundary conditions
            this-&gt;a_ += integrate( _range = markedelements( this-&gt;mesh(), mat.meshMarkers() ),
                                   _expr = ... );
            this-&gt;l_ += integrate( _range = markedelements( this-&gt;mesh(), mat.meshMarkers() ),
                                   _expr = ... );

            if ( mat.hasPhysics( "moisture" ) || mat.hasPhysics( "heat-moisture" ) ) <i class="conum" data-value="2"></i><b>(2)</b>
            {
                this-&gt;l_ += integrate( _range = markedelements( this-&gt;mesh(), mat.meshMarkers() ),
                                       _expr = ... );
            }

            // depend on the boundary conditions
            for (auto const&amp; [bcid, bc] : this-&gt;props_.boundaryConditions2().flatten()) <i class="conum" data-value="3"></i><b>(3)</b>
            {
                if (bcid.type() == "Neumann")
                {
                    if (bcid.field() == "T")    // for heat
                        this-&gt;l_ += integrate( _range = markedfaces( this-&gt;mesh(), bc.markers() ), _expr = ... );
                    if ( bcid.field() == "phi" &amp;&amp; (mat.hasPhysics( "moisture" ) || mat.hasPhysics( "heat-moisture" )) )  // for moisture
                        this-&gt;l_ += integrate( _range = markedfaces( this-&gt;mesh(), bc.markers() ), _expr = .... );
                }
            }

            for (auto const&amp; [bcid, bc] : this-&gt;props_.boundaryConditions2().flatten()) <i class="conum" data-value="4"></i><b>(4)</b>
            {
                if (bcid.type() == "Dirichlet" &amp;&amp; bcid.field() == "T")
                {
                    auto Ts = expr( bc.expression() ) ;
                    Ts.setParameterValues({"t",t}) ;
                    this-&gt;a_ += on( _range=markedfaces(this-&gt;mesh(), bc.markers()), _rhs=this-&gt;l_, _element=T_, _expr=Ts) ;
                }

            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We begin by making a loop on all the materials.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If this material has the physic <code>heat</code> (or <code>heat-moisture</code>), we apply the conditions (and idem for the <code>moisture</code> term).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We make a loop on all the boundary conditions, adding in a first time the terms of Neumann conditions</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Finally, we make a second loop on the boundary conditions, because we have to finish by adding the Dirichlet conditions.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_difficulties_encountered"><a class="anchor" href="#_difficulties_encountered"></a>4. Difficulties encountered</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With all those modifications, the application work on the first try on the case <a href="../../models/moisture/benchmark-moisture.html" class="page">drying-layer</a> involving only the moisture transport process, but didn&#8217;t worked on <a href="#models:heat-moisture/benchmark_EN15026_2007">moisture-uptake</a> : after a few steps, the linear solver of Feel++ didn&#8217;t converge, and therefore the results were totally false !</p>
</div>
<div class="paragraph">
<p>When we try to compare the values of the coefficients got from this simulation and the one got on the application when it was working (without the json file, it correspond to this <a href="https://github.com/feelpp/hygrothermie/tree/cdc4cde59ae49b162e9186e39eb876a96ae2834c">this state</a> in the history), we see that atfer the first step there are mistakes. The main hypothesis of such error is because we use here expression depending on other expression : for instance, <code>K</code> depends on <code>w</code>, and <code>w</code> depends on <code>phi</code>. There is a fonctionnality in Feel++ allowing to do refactoring, which is still in development : we have to be in the branch <code>features/refactoring</code> of the repository <code>feelpp</code>.</p>
</div>
<div class="paragraph">
<p>And, of course, there were parenthesis mistakes that made the solutions false ! Once corrected, all worked quite correctly !</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_documentation_of_the_application"><a class="anchor" href="#_documentation_of_the_application"></a>5. Documentation of the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The documentation of the application <code>feelpp_hm_heat_moisture</code> can be found <a href="../../models/applications/doc_fpp_hm.html" class="page">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_on_several_physics"><a class="anchor" href="#_test_on_several_physics"></a>6. Test on several physics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We watch here a created case, with no real correspondance in physic. It is a mix between the two previous cases, <a href="#models:heat-moisture/benchmark_EN15026_2007">moisture-uptake</a> and <a href="../../models/moisture/benchmark-moisture.html" class="page">drying-layer</a>. The geometry is represented on figure <a href="#fig_geo">1</a> : on the left domain \(\Omega_M\), the physic <code>moisture</code> of the <a href="../../models/moisture/benchmark-moisture.html" class="page">drying-layer</a> case is applied, and on the right one \(\Omega_{HM}\), the physic <code>heat-moisture</code> is applied. Moreover, we add a Dirichlet condition on the edge \(\Gamma_\mathrm{mid}\) with \(\phi=0.95\).</p>
</div>
<div id="fig_geo" class="imageblock">
<div class="content">
<img src="../_images/thomas-saigre/geo_mult.png" alt="geo mult">
</div>
<div class="title">Figure 1. Geometry of the case</div>
</div>
<div class="paragraph">
<p>In figure <a href="#fig_res">2</a> is represented the water content after a simulation of 7 days.</p>
</div>
<div id="fig_res" class="imageblock">
<div class="content">
<img src="../_images/thomas-saigre/res_mult.png" alt="res mult">
</div>
<div class="title">Figure 2. Water content (kg/m³)</div>
</div>
<div class="paragraph">
<p>What we see is not relevant in physic, but we figure that the results of the application are coherent.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>

  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.cemosis.fr" class="icon">
            <img src="../../../../_/img/logoCemosisTransparent.png" alt="Cemosis">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.cemosis.fr" target="_blank" rel="noopener">Projects Documentation</a></li>
          <li><a href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ" target="_blank" rel="noopener">Forums(Slack)</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.cemosis.fr" target="_blank" rel="noopener">Cemosis</a></li>
          <li><a href="https://www.cemosis.fr/news" target="_blank" rel="noopener">News</a></li>
          <li><a href="https://www.cemosis.fr/projects" target="_blank" rel="noopener">Projects</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.feelpp.org" target="_blank" rel="noopener">Feel++ Documentation</a></li>
          <li><a href="http://docs.feelpp.org/user/">Get Started</a></li>
          <li><a href="http://docs.feelpp.org/user//install/distributions/">Downloads</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/cemosis.fr" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/cemosis" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/cemosis" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Cemosis, Université de Strasbourg</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.cemosis.fr/terms-of-use">Terms of Use</a>
        <a href="https://www.cemosis.fr/privacy-policy">Privacy Policy</a>
        <a href="https://www.cemosis.fr/cookie-policy">Cookie Policy</a>
        <a href="https://www.cemosis.fr/support-policy">Support Policy</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>

<script async id="search-script" src="../../../../_/js/vendor/docsearch.js" data-app-id="FIPLENFG5M" data-api-key="489d96aa4ae574ec7ad1f23741a2d46d" data-index-name="cemosis" data-stylesheet="../../../../_/css/vendor/docsearch.css">
</script>

  </body>
</html>
